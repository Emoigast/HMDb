@page "/Administration/ProductTypes"

@using HMDb.Data

@inject IProductTypeData db_ProductTypeData
@inject IProductCategoryData db_ProductCategoryData
@inject IDialogService DialogService

<PageTitle>Product Types</PageTitle>

<MudText Typo="Typo.h4">Product Types</MudText>

<MudButton OnClick="OpenCreateProductTypeDialog" Color="Color.Primary" Variant="Variant.Filled">
    Create new
</MudButton>

<MudSimpleTable Dense="true" Hover="true" Bordered="true">
    <thead>
        <tr>
            <td style="width: 5em;">Id</td>
            <td>Name</td>
            <td>Category</td>
            <td style="width: 7em;">Actions</td>
        </tr>
    </thead>
    <tbody>
        @if (_productType?.Count() > 0)
        {
            @foreach (var productType in _productType)
            {
                <tr>
                    <td style="text-align: end;">@productType.Id</td>
                    <td>@productType.Name</td>
                    <td>@_productCategories.FirstOrDefault(x => x.Id == productType.ProductCategoryId).Name</td>
                    <td>
                        <MudTooltip Text="Update" Placement="Placement.Top" Delay="100" ShowOnFocus="false">
                            <MudIconButton OnClick="e => OpenUpdateProductTypeDialog(productType)" Color="Color.Warning" Variant="Variant.Filled" Size="Size.Small" Icon="@Icons.Material.Filled.Edit" />
                        </MudTooltip>
                        <MudTooltip Text="Delete" Placement="Placement.Top" Delay="100" ShowOnFocus="false">
                            <MudIconButton OnClick="e => OpenDeleteProductTypeDialog(productType)" Color="Color.Error" Variant="Variant.Filled" Size="Size.Small" Icon="@Icons.Material.Filled.Delete" />
                        </MudTooltip>
                    </td>
                </tr>
            }
        }
        else
        {
            <tr>
                <td>-</td>
                <td>No Types found</td>
                <td>-</td>
                <td>-</td>
            </tr>
        }
    </tbody>
</MudSimpleTable>
