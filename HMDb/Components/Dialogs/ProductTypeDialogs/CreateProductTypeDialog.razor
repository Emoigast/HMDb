@using HMDb.Data

@inject IProductTypeData db_ProductTypeData
@inject IProductCategoryData db_ProductCategoryData

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            @TitleContent
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudForm @ref="form">
            <MudTextField T="string" Label="Product Type Name"
                          @bind-Value="_productTypeName"
                          Required="true"
                          Immediate="true"
                          Placeholder="Enter type name"
                          HelperText="Please enter a product type name."
                          Validation="@(new Func<string, string>(ValidateName))" />
            <MudSelect T="int" Label="Select Category"
                       @bind-Value="_selectedCategoryId"
                       Required="true"
                       Immediate="true"
                       HelperText="Please select a product category."
                       Validation="@(new Func<string, string>(ValidateName))">
                @foreach (var productCategory in _productCategories)
                {
                    <MudSelectItem Value="@productCategory.Id">@productCategory.Name</MudSelectItem>
                }
            </MudSelect>
        </MudForm>
    </DialogContent>
    <DialogActions>
        @if (MudDialog?.Options.FullScreen == false)
        {
            <MudTooltip Text="Fullscreen" Placement="Placement.Top" Delay="100" ShowOnFocus="false">
                <MudIconButton OnClick="ToggleFullScreen" Icon="@Icons.Material.Filled.Fullscreen" Variant="Variant.Text" />
            </MudTooltip>
        }
        else
        {
            <MudTooltip Text="Exit Fullscreen" Placement="Placement.Top" Delay="100" ShowOnFocus="false">
                <MudIconButton OnClick="ToggleFullScreen" Icon="@Icons.Material.Filled.FullscreenExit" Variant="Variant.Text" />
            </MudTooltip>
        }
        <MudButton OnClick="Cancel" Variant="Variant.Outlined" Color="Color.Error">Cancel</MudButton>
        <MudButton OnClick="CreateProductType" Variant="Variant.Filled" Color="Color.Success">@ButtonText</MudButton>
    </DialogActions>
</MudDialog>
